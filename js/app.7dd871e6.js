(function(e){function t(t){for(var i,a,s=t[0],m=t[1],c=t[2],l=0,d=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(i in m)Object.prototype.hasOwnProperty.call(m,i)&&(e[i]=m[i]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,s=1;s<n.length;s++){var m=n[s];0!==o[m]&&(i=!1)}i&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},o={app:0},r=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/Frontend-developer-test/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],m=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=m;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2875:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],a={name:"App"},s=a,m=(n("bff2"),n("2877")),c=Object(m["a"])(s,o,r,!1,null,null,null),u=c.exports,l=n("8c4f"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"article"},[n("router-link",{staticClass:"article-title",attrs:{to:"/"}},[e._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cum doloremque obcaecati quisquam reprehenderit soluta. Alias cum iure minima molestiae nam nihil totam voluptatibus? Aspernatur nisi officiis quod temporibus ut vero.")]),n("div",{staticClass:"article-date"},[e._v("01/01/2014")]),n("div",{domProps:{innerHTML:e._s(e.markdowned)}}),n("comment-container")],1)},p=[],f=n("5530"),h=n("2f62"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"article-comments"},[n("h3",[e._v("Комментарии:")]),e._l(e.allMockComments,(function(t){return n("comment-template",{key:t.id,attrs:{comment:t,time:e.currentTime}})})),n("comment-form")],2)},g=[],b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isClosed?i("button",{class:"comment-level-"+e.comment.level,on:{click:function(t){e.isClosed=!1}}},[e._v("Открыть комментарий ")]):i("div",{staticClass:"comment",class:"comment-level-"+e.comment.level,on:{mouseenter:e.showHideButton,mouseleave:e.hideHideButton}},[i("div",{staticClass:"comment-avatar",class:{collapsed:e.comment.hidden}},[i("img",{class:{collapsed:e.comment.hidden},attrs:{src:n("cc1d"),alt:"avatar"}})]),i("div",{staticClass:"comment-body"},[i("div",{staticClass:"comment-body-nav"},[i("router-link",{staticClass:"comment-body-nav-name",attrs:{to:"/"}},[e._v(e._s(e.comment.userName))]),i("div",{staticClass:"comment-body-nav-time"},[e._v(e._s(e.timeFromNow))]),i("div",{staticClass:"comment-body-nav-vote"},[i("button",{on:{click:function(t){return e.increaseRating(e.comment.id)}}},[e._v("+")]),i("button",[e._v(e._s(e.comment.rating))]),i("button",{on:{click:function(t){return e.decreaseRating(e.comment.id)}}},[e._v("-")])]),i("div",{staticClass:"comment-body-nav-hide",style:e.isHideVisible?"visibility: hidden":"",on:{click:function(t){return e.hideComment(e.comment.id)}}},[e._v(e._s(e.comment.hidden?"Раскрыть":"Скрыть")+" ")]),e.comment.level<2?i("div",{staticClass:"comment-body-nav-reply",on:{click:function(t){e.isReplying=!e.isReplying}}},[e._v(" Ответить ")]):e._e()],1),i("div",{staticClass:"comment-body-text"},[e.comment.hidden?e._e():i("div",{domProps:{innerHTML:e._s(e.parsedText)}})])])]),e.isReplying?i("comment-form",{class:"comment-level-"+e.comment.level,attrs:{"reply-to":e.comment.id},on:{commentSent:function(t){e.isReplying=!1}}}):e._e()],1)},y=[],x=(n("a9e3"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"addComment"},[e._l(e.errors,(function(t){return n("div",{key:t,staticStyle:{color:"red"}},[e._v(e._s(t))])})),e.sent?n("div",{staticStyle:{color:"green"}},[e._v("Комментарий успешно добавлен!")]):e._e(),n("form",{attrs:{action:""}},[n("fieldset",[n("legend",[e._v("Добавить комментарий")]),n("label",{attrs:{for:"name"}},[e._v(" Имя ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{id:"name",type:"text"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),n("label",{attrs:{for:"email"}},[e._v(" E-mail ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{id:"email",type:"text"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),n("label",{attrs:{for:"commentText"}},[e._v(" Текст комментария ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.commentText,expression:"commentText"}],attrs:{wrap:"hard",name:"CommentText",id:"commentText",cols:"100",rows:"7"},domProps:{value:e.commentText},on:{input:function(t){t.target.composing||(e.commentText=t.target.value)}}}),n("button",{on:{click:e.checkForm}},[e._v("Добавить комментарий")])])])],2)}),C=[],_=(n("b0c0"),{name:"CommentForm",props:{replyTo:Number},data:function(){return{name:"",email:"",commentText:"",errors:[],sent:!1}},methods:{checkForm:function(e){e.preventDefault(),this.errors=[],this.name||this.errors.push("Требуется указать имя."),/^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,4})$/.test(this.email)||this.errors.push("Требуется указать правильную почту."),this.commentText||this.errors.push("Требуется указать текст комментария."),this.errors.length<1&&this.postComment()},postComment:function(){this.$store.commit("addComment",{reply:this.replyTo?this.replyTo:void 0,text:this.commentText,userName:this.name}),this.name="",this.commentText="",this.email="",this.sent=!0,this.$emit("commentSent")}}}),k=_,w=Object(m["a"])(k,x,C,!1,null,"1ef4e844",null),T=w.exports,q={name:"CommentTemplate",components:{CommentForm:T},computed:{parsedText:function(){return this.markdown(this.comment.text)},timeFromNow:function(){var e=Math.floor((this.time-this.comment.timeStamp)/1e3),t=Math.floor(e/60),n=Math.floor(t/60),i=Math.floor(n/24);return i>0?i+" дней назад":n>0?n+" часов назад":e<10?"только что":t+" минут назад"}},data:function(){return{isClosed:!1,isReplying:!1,isHideVisible:!0}},methods:{hideComment:function(e){this.$store.commit("hideComment",e)},showHideButton:function(){this.isHideVisible=!1},hideHideButton:function(){this.isHideVisible=!0},increaseRating:function(e){this.$store.commit("increment",e)},decreaseRating:function(e){this.$store.commit("decrement",e),this.comment.rating<-10&&(this.isClosed=!0)}},mounted:function(){this.comment.rating<-10&&(this.isClosed=!0)},props:{comment:{type:Object,default:function(){return[]}},time:{type:Number,default:0}}},O=q,A=Object(m["a"])(O,b,y,!1,null,"f0d083d4",null),S=A.exports,j={name:"CommentContainer",computed:Object(f["a"])({},Object(h["b"])(["allMockComments"])),components:{CommentTemplate:S,CommentForm:T},data:function(){return{currentTime:Date.now(),timer:null}},mounted:function(){this.startTimer()},destroyed:function(){this.stopTimer()},methods:{startTimer:function(){var e=this;this.timer=setInterval((function(){e.currentTime+=1e3}),1e3)},stopTimer:function(){clearTimeout(this.timer)}}},M=j,N=Object(m["a"])(M,v,g,!1,null,"ebd01d96",null),B=N.exports,L={name:"Article",computed:Object(f["a"])({},Object(h["b"])(["articleText"]),{markdowned:function(){return this.markdown(this.articleText)}}),data:function(){return{}},components:{CommentContainer:B}},P=L,$=Object(m["a"])(P,d,p,!1,null,null,null),I=$.exports;i["a"].use(l["a"]);var H=new l["a"]({routes:[{path:"/",name:"Article",component:I}]}),R=(n("7db0"),n("c740"),n("d81d"),n("a434"),n("2909")),E={actions:{},mutations:{increment:function(e,t){e.mockComments.find((function(e){return e.id===t})).rating+=1},decrement:function(e,t){e.mockComments.find((function(e){return e.id===t})).rating-=1},addComment:function(e,t){t.id=Math.max.apply(Math,Object(R["a"])(e.mockComments.map((function(e){return e.id}))))+1,t.rating=0,t.reply||(t.reply=t.id),t.timeStamp=Date.now(),e.mockComments.push(t)},hideComment:function(e,t){var n=e.mockComments.find((function(e){return e.id===t}));n.hidden=!n.hidden}},state:{comments:[],mockComments:[{id:0,reply:0,rating:0,text:"lorem ***first*** Ipsum",userName:"Lorem Dolor",timeStamp:1584420823049,hidden:!1},{id:1,reply:0,rating:1,text:"lorem reply to first",userName:"Dolor Ipsum",timeStamp:1584420823049,hidden:!1},{id:2,reply:1,rating:0,text:"lorem me **reply** to second",userName:"Sit Amet Ipsum",timeStamp:1584420823049,hidden:!1},{id:4,reply:4,rating:2,text:"lorem ipsum dolor sit amet",userName:"Lorem Ipsum",timeStamp:158454e7,hidden:!1},{id:5,reply:0,rating:-11,text:"lorem ipsum dolor sit amet reply to first",userName:"Lorem Ipsum",timeStamp:15844e8,hidden:!1},{id:6,reply:2,rating:2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Beatae, blanditiis deleniti dignissimos doloribus eveniet fuga fugiat iure quibusdam quos velit.",userName:"Lorem Ipsum",timeStamp:1584e9,hidden:!1},{id:7,reply:6,rating:2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Beatae, ",userName:"Lorem Ipsum",timeStamp:1584420823049,hidden:!1},{id:8,reply:5,rating:2,text:" reply to dolor first",userName:"Lorem Ipsum",timeStamp:1584420823049,hidden:!1}]},getters:{allComments:function(e){return e.comments},allMockComments:function(e){for(var t=[],n=function(n){var i=e.mockComments[n];if(i.reply===i.id)i.level=0,t.push(i);else{var o=t.find((function(e){return e.id===i.reply}));if(void 0===o||o.hidden)return"continue";var r=t.findIndex((function(e){return e.id===i.reply}));o.reply===o.id?i.level=1:i.level=2,t.splice(r,0,i)}},i=0;i<e.mockComments.length;i++)n(i);return t.reverse()}}},F={actions:{},mutations:{},state:{article:"\nLorem ipsum dolor sit amet, \nconsectetur adipisicing elit. Accusamus asperiores aspernatur, \nassumenda fugit itaque magnam magni quas quibusdam? Ea error \nexcepturi illum, ipsa ipsam laborum libero magni maiores necessitatibus nesciunt, \nobcaecati odit officiis optio reprehenderit sequi similique, temporibus. Corporis \neligendi iure nobis non nostrum odit omnis, quas quia sit totam? Alias aperiam atque \ndistinctio ea eaque eos error fuga, illum necessitatibus obcaecati officia, officiis quaerat, \nqui soluta temporibus veniam voluptates? Modi nobis praesentium quas quibusdam voluptatibus. \nConsectetur eaque exercitationem pariatur quos unde! Asperiores autem eius, enim incidunt minima \nnecessitatibus nemo quasi quisquam rem repellendus. Cumque explicabo pariatur temporibus vitae voluptate?  \nThis article also supports markdown! \nAs example, you can do your text *italic*, **bold**, or ***italic bold*** as like it works in MD.\nyou can ~hilit~ highlight your code using backquotes ` like that `  \nyou can mark headers by # symbol:\n# header 1 \n## header 2 \n### header 3 \n#### header 4 \n##### header 5 \n###### header 6 \nor even use horizontal line\n---\n\nyou can attach [links](google.com) without description (google.com)  \nand images ![images](https://img.icons8.com/cotton/2x/thumb-up.png)\n---\n## things that are not supported yet:  \n1. lists and numbered lists  \n2. screening with backslash (\\)  \n3. tables  \n4. footnotes\n"},getters:{articleText:function(e){return e.article}}};i["a"].use(h["a"]);var D=new h["a"].Store({modules:{comments:E,article:F}});n("99af"),n("caad"),n("baa5"),n("fb6a"),n("4d63"),n("ac1f"),n("25f0"),n("2532"),n("5319");function z(e){for(var t=[{re:/\*{3}(.*?)\*{3}/gi,tagBefore:"<b><i>",tagAfter:"</i></b>"},{re:/\*{2}(.*?)\*{2}/gi,tagBefore:"<b>",tagAfter:"</b>"},{re:/\*(.*?)\*/gi,tagBefore:"<i>",tagAfter:"</i>"},{re:/_(.*?)_/gi,tagBefore:"<i>",tagAfter:"</i>"},{re:/~(.*?)~/gi,tagBefore:"<s>",tagAfter:"</s>"},{re:/`(.*?)`/gi,tagBefore:'<span style="background: lightgray">',tagAfter:"</span>"}],n=6;n>0;n--){var i={re:new RegExp("^#{".concat(n,"}(.*)#*"),"gmiu"),tagBefore:"<h".concat(n,">"),tagAfter:"</h".concat(n,">")};t.push(i)}for(var o=function(){var t=a[r];e=e.replace(t.re,(function(e,n){return t.tagBefore+n+t.tagAfter}))},r=0,a=t;r<a.length;r++)o();e=e.replace(/---/gi,(function(){return"<hr>"}));var s=function(e,t){var n,i=e.lastIndexOf("("),o=e.slice(i+1,e.length-1);return n=e.includes("[")?e.slice(1,i-1):o,"img"===t?'<img src="'.concat(o,'" alt="').concat(n,'">'):"a"===t?'<a href="'.concat(o,'">')+n+"</a>":void 0},m=/(![[](.*?)[\]])\(.*?\)/gi;e=e.replace(m,(function(e){return s(e,"img")}));var c=/([[](.*?)[\]])?\(.*?\)/gi;return e=e.replace(c,(function(e){return s(e,"a")})),e=e.replace(/ {2}/gi,(function(){return"<br>"})),e}var V=z;i["a"].config.productionTip=!1,i["a"].mixin({methods:{markdown:function(e){return V(e)}}}),new i["a"]({render:function(e){return e(u)},store:D,router:H}).$mount("#app")},bff2:function(e,t,n){"use strict";var i=n("2875"),o=n.n(i);o.a},cc1d:function(e,t,n){e.exports=n.p+"img/empty-avatar.8cb04c92.png"}});
//# sourceMappingURL=app.7dd871e6.js.map